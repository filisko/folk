define(["jquery","../loader"],function(e,t){function n(n){n.on("click",".format-child-remove",function(t){if(confirm("Are you sure?")){var n=e(this).parent().parent();n.slideUp("normal",function(){n.remove()})}t.preventDefault()}).on("click",".format-child-up",function(n){var r=e(this).parent().parent(),i=r.prev();i.length&&(t.destroy(r),r.insertBefore(i),t.init(r)),n.preventDefault()}).on("click",".format-child-down",function(n){var r=e(this).parent().parent(),i=r.next();i.length&&(t.destroy(r),r.insertAfter(i),t.init(r)),n.preventDefault()})}return{init:function(r){r.on("click",".format-child-add",function(n){var r=e(this),i=e(this).parent().parent(),s=i.siblings('script[type="js-template"]').html(),o=i.siblings("div").length;s=s.replace(/\:\:n\:\:/g,o),t.init(e(s).hide().insertBefore(i).slideDown("normal")),n.preventDefault()}),n(r)},initBtnEvents:n}});